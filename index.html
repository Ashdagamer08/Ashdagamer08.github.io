<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #121212;
      color: white;
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }
    canvas {
      display: block;
      background: #212121;
      border: 2px solid #4caf50;
      box-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
    }
  </style>
</head>
<body>
<canvas id="game" width="800" height="600"></canvas>
<script>
  const canvas = document.getElementById("game");
  const context = canvas.getContext("2d");

  // Config
  const BALL_RADIUS = 12; // ball size
  const PADDLE_WIDTH = 15;
  const PADDLE_HEIGHT = 150; // paddle size
  const PADDLE_SPEED = 8; // paddle speed
  const BALL_SPEED_X = 3; // horizontal ball speed
  const BALL_SPEED_Y = 2; // vertical ball speed
  const MAX_BALL_SPEED_Y = 60; // maximum vertical ball speed
  const HITBOX_BUFFER = 5; // paddle hitbox size
  const SCORE_FONT = "40px Arial"; // font size
  const SCORE_COLOR = "#4caf50";
  const WIN_SCORE = 7;

  let ballX = canvas.width / 2;
  let ballY = canvas.height / 2;
  let ballDX = BALL_SPEED_X;
  let ballDY = BALL_SPEED_Y;
  let paddle1Y = canvas.height / 2 - PADDLE_HEIGHT / 2;
  let paddle2Y = canvas.height / 2 - PADDLE_HEIGHT / 2;
  let score1 = 0;
  let score2 = 0;
  let showingWinScreen = false;

  function draw() {
    context.fillStyle = "#212121";
    context.fillRect(0, 0, canvas.width, canvas.height);

    context.fillStyle = "#4caf50";
    context.beginPath();
    context.arc(ballX, ballY, BALL_RADIUS, 0, Math.PI * 2);
    context.fill();

    context.fillStyle = "#ffffff";
    context.fillRect(0, paddle1Y, PADDLE_WIDTH, PADDLE_HEIGHT);
    context.fillRect(canvas.width - PADDLE_WIDTH, paddle2Y, PADDLE_WIDTH, PADDLE_HEIGHT);

    for (let i = 0; i < canvas.height; i += 40) {
      context.fillStyle = "#4caf50";
      context.fillRect(canvas.width / 2 - 1, i, 2, 20);
    }

    context.font = SCORE_FONT;
    context.fillStyle = SCORE_COLOR;
    context.fillText(score1, canvas.width / 4, 60);
    context.fillText(score2, (canvas.width * 3) / 4, 60);

    if (showingWinScreen) {
      context.fillStyle = "#ffffff";
      context.font = "50px Arial";
      const winnerText = score1 >= WIN_SCORE ? "You Win!" : "AI Wins!";
      context.fillText(winnerText, canvas.width / 2 - 150, canvas.height / 2 - 50);
      context.font = "30px Arial";
      context.fillText("Click to Restart", canvas.width / 2 - 120, canvas.height / 2 + 20);
    }
  }

  function move() {
    if (showingWinScreen) return;

    ballX += ballDX;
    ballY += ballDY;

    if (ballY - BALL_RADIUS < 0 || ballY + BALL_RADIUS > canvas.height) {
      ballDY = -ballDY;
    }

    if (
      ballX - BALL_RADIUS < PADDLE_WIDTH &&
      ballY > paddle1Y - HITBOX_BUFFER &&
      ballY < paddle1Y + PADDLE_HEIGHT + HITBOX_BUFFER
    ) {
      ballDX = -ballDX;
      const deltaY = ballY - (paddle1Y + PADDLE_HEIGHT / 2);
      ballDY = deltaY * 0.35;
      ballDY = Math.max(-MAX_BALL_SPEED_Y, Math.min(MAX_BALL_SPEED_Y, ballDY));
    } else if (ballX - BALL_RADIUS < 0) {
      score2++;
      resetBall();
    }

    if (
      ballX + BALL_RADIUS > canvas.width - PADDLE_WIDTH &&
      ballY > paddle2Y - HITBOX_BUFFER &&
      ballY < paddle2Y + PADDLE_HEIGHT + HITBOX_BUFFER
    ) {
      ballDX = -ballDX;
      const deltaY = ballY - (paddle2Y + PADDLE_HEIGHT / 2);
      ballDY = deltaY * 0.35;
      ballDY = Math.max(-MAX_BALL_SPEED_Y, Math.min(MAX_BALL_SPEED_Y, ballDY));
    } else if (ballX + BALL_RADIUS > canvas.width) {
      score1++;
      resetBall();
    }

    const aiPaddleCenter = paddle2Y + PADDLE_HEIGHT / 2;
    if (aiPaddleCenter < ballY - 50) {
      paddle2Y += PADDLE_SPEED;
    } else if (aiPaddleCenter > ballY + 50) {
      paddle2Y -= PADDLE_SPEED;
    }

    if (score1 >= WIN_SCORE || score2 >= WIN_SCORE) {
      showingWinScreen = true;
    }
  }

  function resetBall() {
    ballX = canvas.width / 2;
    ballY = canvas.height / 2;
    ballDX = -ballDX;
    ballDY = BALL_SPEED_Y;
  }

  function handleMouse(e) {
    const rect = canvas.getBoundingClientRect();
    const mouseY = e.clientY - rect.top;
    paddle1Y = mouseY - PADDLE_HEIGHT / 2;
    paddle1Y = Math.max(0, Math.min(canvas.height - PADDLE_HEIGHT, paddle1Y));
  }

  function handleClick(e) {
    if (showingWinScreen) {
      score1 = 0;
      score2 = 0;
      showingWinScreen = false;
      ballDX = BALL_SPEED_X;
      ballDY = BALL_SPEED_Y;
    }
  }

  canvas.addEventListener("mousemove", handleMouse);
  canvas.addEventListener("mousedown", handleClick);

  function gameLoop() {
    draw();
    move();
    requestAnimationFrame(gameLoop);
  }

  gameLoop();
</script>
</body>
</html>

